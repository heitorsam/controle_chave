------------------
--FICHA INSPECAO--
------------------

DROP TABLE inspecao_sesmt.ds;

CREATE TABLE inspecao_sesmt.FICHA_INSPECAO(
CD_FICHA_INSPECAO   INT NOT NULL,
DS_FICHA_INSPECAO   VARCHAR(100) NOT NULL,
DIAS_PERIODICIDADE  INT NOT NULL,
TP_STATUS           VARCHAR(1) NOT NULL, -- A - ATIVO | I - INATIVO
CD_USUARIO_CADASTRO VARCHAR(20) NOT NULL,
HR_CADASTRO         TIMESTAMP(6) NOT NULL,
CD_USUARIO_ULT_ALT  VARCHAR(20),
HR_ULT_ALT          TIMESTAMP(6),

--PRIMARY_KEY
CONSTRAINT PK_CD_FICHA_INSPECAO PRIMARY KEY (CD_FICHA_INSPECAO)

);

--SEQUENCE  

DROP SEQUENCE inspecao_sesmt.SEQ_FICHA_INSPECAO;
CREATE SEQUENCE inspecao_sesmt.SEQ_FICHA_INSPECAO  
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;

------------------
--GRUPO PERGUNTA--
------------------

DROP TABLE inspecao_sesmt.GRUPO_PERGUNTA;

CREATE TABLE inspecao_sesmt.GRUPO_PERGUNTA(
CD_GRUPO_PERGUNTA   INT NOT NULL,
CD_FICHA_INSPECAO   INT NOT NULL,
ORDEM               INT NOT NULL,
DS_GRUPO_PERGUNTA   VARCHAR(100) NOT NULL,
TP_STATUS           VARCHAR(1) NOT NULL, -- A - ATIVO | I - INATIVO
CD_USUARIO_CADASTRO VARCHAR(20) NOT NULL,
HR_CADASTRO         TIMESTAMP(6) NOT NULL,
CD_USUARIO_ULT_ALT  VARCHAR(20),
HR_ULT_ALT          TIMESTAMP(6),

--PRIMARY_KEY
CONSTRAINT PK_CD_GRUPO_PERGUNTA PRIMARY KEY (CD_GRUPO_PERGUNTA)

);

--SEQUENCE  

DROP SEQUENCE inspecao_sesmt.SEQ_GRUPO_PERGUNTA;
CREATE SEQUENCE inspecao_sesmt.SEQ_GRUPO_PERGUNTA  
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;

------------
--PERGUNTA--
------------

DROP TABLE inspecao_sesmt.PERGUNTA;

CREATE TABLE inspecao_sesmt.PERGUNTA(
CD_PERGUNTA         INT NOT NULL,
CD_GRUPO_PERGUNTA   INT NOT NULL,
ORDEM               INT NOT NULL,
DS_PERGUNTA         VARCHAR(100) NOT NULL,
PESO                FLOAT NOT NULL,
TP_STATUS           VARCHAR(1) NOT NULL, -- A - ATIVO | I - INATIVO
CD_USUARIO_CADASTRO VARCHAR(20) NOT NULL,
HR_CADASTRO         TIMESTAMP(6) NOT NULL,
CD_USUARIO_ULT_ALT  VARCHAR(20),
HR_ULT_ALT          TIMESTAMP(6),

--PRIMARY_KEY
CONSTRAINT PK_CD_PERGUNTA PRIMARY KEY (CD_PERGUNTA)

);

--SEQUENCE  

DROP SEQUENCE inspecao_sesmt.SEQ_PERGUNTA;
CREATE SEQUENCE inspecao_sesmt.SEQ_PERGUNTA  
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;

------------
--INSPECAO--
------------

DROP TABLE inspecao_sesmt.INSPECAO;

CREATE TABLE inspecao_sesmt.INSPECAO(
CD_INSPECAO            INT NOT NULL,
CD_PERGUNTA            INT NOT NULL,
CD_LOCAL               INT NOT NULL,
DS_RESPOSTA            VARCHAR(20) NOT NULL,
TP_STATUS              VARCHAR(1) NOT NULL, -- A - ABERTO | C - CONCLUIDO
OBS_RESPOSTA           VARCHAR(100),
CD_USUARIO_CADASTRO    VARCHAR(20) NOT NULL,
HR_CADASTRO            TIMESTAMP(6) NOT NULL,
CD_USUARIO_ULT_ALT     VARCHAR(20),
HR_ULT_ALT             TIMESTAMP(6)

--PRIMARY_KEY
--CONSTRAINT PK_CD_INSPECAO PRIMARY KEY (CD_INSPECAO)

);

--SEQUENCE  

DROP SEQUENCE inspecao_sesmt.SEQ_INSPECAO;
CREATE SEQUENCE inspecao_sesmt.SEQ_INSPECAO
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;

------------
--PARECER--
------------

DROP TABLE inspecao_sesmt.PARECER;

CREATE TABLE inspecao_sesmt.PARECER(
CD_PARECER              INT NOT NULL,
CD_INSPECAO             INT NOT NULL,
CLOB_PARECER_TEC        CLOB,
CD_USUARIO_PARECER_TEC  VARCHAR(20) NOT NULL,
CLOB_PARECER_AREA       CLOB,
CD_USUARIO_PARECER_AREA VARCHAR(20) NULL,
CD_USUARIO_CADASTRO     VARCHAR(20) NULL,
HR_CADASTRO             TIMESTAMP(6) NOT NULL,
CD_USUARIO_ULT_ALT      VARCHAR(20),
HR_ULT_ALT              TIMESTAMP(6),

--PRIMARY_KEY
CONSTRAINT PK_CD_PARECER PRIMARY KEY (CD_PARECER)

);

--SEQUENCE  

DROP SEQUENCE inspecao_sesmt.SEQ_PARECER;
CREATE SEQUENCE inspecao_sesmt.SEQ_PARECER
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;

---------
--LOCAL--
---------

DROP TABLE inspecao_sesmt.LOCAL;

CREATE TABLE inspecao_sesmt.LOCAL(
CD_LOCAL                INT NOT NULL,
DS_LOCAL                VARCHAR(100),
TP_STATUS               VARCHAR(1) NOT NULL, -- A - ATIVO | I - INATIVO
CD_USUARIO_CADASTRO     VARCHAR(20) NOT NULL,
HR_CADASTRO             TIMESTAMP(6) NOT NULL,
CD_USUARIO_ULT_ALT      VARCHAR(20),
HR_ULT_ALT              TIMESTAMP(6),

--PRIMARY_KEY
CONSTRAINT PK_CD_LOCAL PRIMARY KEY (CD_LOCAL)

);

--SEQUENCE  

DROP SEQUENCE inspecao_sesmt.SEQ_LOCAL;
CREATE SEQUENCE inspecao_sesmt.SEQ_LOCAL
START WITH 1    
INCREMENT BY 1
NOCACHE
NOCYCLE;
